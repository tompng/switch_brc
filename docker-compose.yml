services:
  unbound:
    image: mvance/unbound:latest
    volumes:
      - ./a-records.conf:/opt/unbound/etc/unbound/a-records.conf:ro
    ports:
      - 53:53/udp
  bedrock-connect:
    build: ./bedrock-connect
    volumes:
      - ./custom_servers.json:/docker/brc/custom_servers.json:ro
    ports:
      - 19132:19132/udp
  wrtc_tunnel:
    build: ./wrtc_tunnel
    ports:
      - 19131:19131/udp

  bedrock-server:
    restart: always
    image: itzg/minecraft-bedrock-server:latest
    environment:
      SERVER_NAME: SERVER1
      EULA: "TRUE"
      GAMEMODE: survival
      DIFFICULTY: normal
      LEVEL_NAME: MY CREATIVE
    ports:
      - 19133:19132/udp
    volumes:
      - ./data:/data
    stdin_open: true
    tty: true
